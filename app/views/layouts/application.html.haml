!!! 5
%html
  %head
    %title Ichthys-Basar
    = stylesheet_link_tag 'application'
    = javascript_include_tag 'application', "data-turbolinks-track" => true
    = csrf_meta_tags

  %body
    - if can? :manage, Seller
      #seller_list{data: {list: ( hash = {}; Seller.all.each {|seller| hash[seller.number] = [seller.id, seller.initials]}; hash.to_json)}}
    - if can? :read, Transaction
      #shortcuts_available

    #menu
      %div{style: "display: block; margin: 10px"}
        = image_tag 'logo.png', size: '130x20'
      %ul
        - if user_signed_in?
          %li{style: "padding-left: 10px; text-indent: -10px; word-break: break-all"}= current_user.email
          %li.indented{style: "margin-bottom: 2ex"}= link_to "(#{t ".logout"})", destroy_user_session_path, :method => :delete
          %li.topic= link_to t(".profile"), edit_user_registration_path
        - else
          %li.topic= link_to t(".login"), new_user_session_path

        %li.topic= link_to t(".home"), root_path

        - if can? :read, User
          %li.topic= link_to User.model_name.human(count: 2), users_path

        - if can? :read, Seller
          %li.topic= link_to t(".sellers"), sellers_path
          %li.topic= link_to t(".revenue"), sellers_revenue_path

        - if can? :read, Task
          %li.topic= link_to t(".tasks"), tasks_path

        - if can? :read, Transaction
          %li.topic= link_to t(".transactions.title"), transactions_path
          %li.indented= link_to "(#{t ".transactions.all"})", all_transactions_path
          %li{style: "margin-top: 2ex"}= t(".transactions.client") + ": #@client_key"

    #content
      - if flash[:alert]
        #alert.message= flash[:alert]
      - if flash[:error]
        #error.message= flash[:error]
      - if flash[:warning]
        #warning.message= flash[:warning]
      - if flash[:notice]
        #notice.message= flash[:notice]

      = yield
